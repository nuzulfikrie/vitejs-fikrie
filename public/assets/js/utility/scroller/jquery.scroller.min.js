!function(t,e){"use strict";function a(e){e=t.extend({},v,e||{}),null===g&&(g=t("body"));for(var a=t(this),n=0,r=a.length;n<r;n++)o(a.eq(n),e);return a}function o(a,o){if(!a.hasClass(f.base)){o=t.extend({},o,a.data(p+"-options"));var i="";i+='<div class="'+f.bar+'">',i+='<div class="'+f.track+'">',i+='<div class="'+f.handle+'">',i+="</div></div></div>",o.paddingTop=parseInt(a.css("padding-top"),10),o.paddingRight=parseInt(a.css("padding-right"),10),o.paddingBottom=parseInt(a.css("padding-bottom"),10),o.paddingLeft=parseInt(a.css("padding-left"),10),a.addClass([f.base,o.customClass].join(" ")).wrapInner('<div class="'+f.content+'" />').prepend(i),o.horizontal&&a.addClass(f.isHorizontal);var s=t.extend({$scroller:a,$content:a.find(h(f.content)),$bar:a.find(h(f.bar)),$track:a.find(h(f.track)),$handle:a.find(h(f.handle))},o);s.trackMargin=parseInt(s.trackMargin,10),s.$content.on("scroll."+p,s,n),s.$scroller.on(u.start,h(f.track),s,r).on(u.start,h(f.handle),s,l).data(p,s),m.reset.apply(a),t(e).one("load",function(){m.reset.apply(a)})}}function n(t){t.preventDefault(),t.stopPropagation();var e=t.data,a={};if(e.horizontal){var o=e.$content.scrollLeft();o<0&&(o=0);var n=o/e.scrollRatio;n>e.handleBounds.right&&(n=e.handleBounds.right),a={left:n}}else{var r=e.$content.scrollTop();r<0&&(r=0);var l=r/e.scrollRatio;l>e.handleBounds.bottom&&(l=e.handleBounds.bottom),a={top:l}}e.$handle.css(a)}function r(t){t.preventDefault(),t.stopPropagation();var e=t.data,a=t.originalEvent,o=e.$track.offset(),n=void 0!==a.targetTouches?a.targetTouches[0]:null,r=n?n.pageX:t.clientX,l=n?n.pageY:t.clientY;e.horizontal?(e.mouseStart=r,e.handleLeft=r-o.left-e.handleWidth/2,d(e,e.handleLeft)):(e.mouseStart=l,e.handleTop=l-o.top-e.handleHeight/2,d(e,e.handleTop)),i(e)}function l(t){t.preventDefault(),t.stopPropagation();var e=t.data,a=t.originalEvent,o=void 0!==a.targetTouches?a.targetTouches[0]:null,n=o?o.pageX:t.clientX,r=o?o.pageY:t.clientY;e.horizontal?(e.mouseStart=n,e.handleLeft=parseInt(e.$handle.css("left"),10)):(e.mouseStart=r,e.handleTop=parseInt(e.$handle.css("top"),10)),i(e)}function i(t){t.$content.off(h(p)),g.on(u.move,t,s).on(u.end,t,c)}function s(t){t.preventDefault(),t.stopPropagation();var e=t.data,a=t.originalEvent,o=0,n=0,r=void 0!==a.targetTouches?a.targetTouches[0]:null,l=r?r.pageX:t.clientX,i=r?r.pageY:t.clientY;e.horizontal?(n=e.mouseStart-l,o=e.handleLeft-n):(n=e.mouseStart-i,o=e.handleTop-n),d(e,o)}function c(t){t.preventDefault(),t.stopPropagation();var e=t.data;e.$content.on("scroll.scroller",e,n),g.off(".scroller")}function d(t,e){var a={};if(t.horizontal){e<t.handleBounds.left&&(e=t.handleBounds.left),e>t.handleBounds.right&&(e=t.handleBounds.right);var o=Math.round(e*t.scrollRatio);a={left:e},t.$content.scrollLeft(o)}else{e<t.handleBounds.top&&(e=t.handleBounds.top),e>t.handleBounds.bottom&&(e=t.handleBounds.bottom);var n=Math.round(e*t.scrollRatio);a={top:e},t.$content.scrollTop(n)}t.$handle.css(a)}function h(t){return"."+t}var p="scroller",g=null,f={base:"scroller",content:"scroller-content",bar:"scroller-bar",track:"scroller-track",handle:"scroller-handle",isHorizontal:"scroller-horizontal",isSetup:"scroller-setup",isActive:"scroller-active"},u={start:"touchstart."+p+" mousedown."+p,move:"touchmove."+p+" mousemove."+p,end:"touchend."+p+" mouseup."+p},v={customClass:"",duration:0,handleSize:0,horizontal:!1,trackMargin:0,padding:0},m={defaults:function(e){return v=t.extend(v,e||{}),"object"!=typeof this||t(this)},destroy:function(){return t(this).each(function(e,a){var o=t(a).data(p);o&&(o.$scroller.removeClass([o.customClass,f.base,f.isActive].join(" ")).attr("style",""),o.$bar.remove(),o.$content.contents().unwrap(),o.$content.off(h(p)),o.$scroller.off(h(p)).removeData(p))})},scroll:function(e,a){return t(this).each(function(o){var n=t(this).data(p),r=a||v.duration;if("number"!=typeof e){var l=t(e);if(l.length>0){var i=l.position();e=n.horizontal?i.left+n.$content.scrollLeft():i.top+n.$content.scrollTop()}else e=n.$content.scrollTop()}var s=n.horizontal?{scrollLeft:e}:{scrollTop:e};n.$content.stop().animate(s,r)})},reset:function(){return t(this).each(function(e){var a=t(this).data(p);if(a){a.$scroller.addClass(f.isSetup);var o={},n={},r={},l=0,i=!0;a.horizontal?(a.barHeight=a.$content[0].offsetHeight-a.$content[0].clientHeight,a.frameWidth=a.$content.outerWidth(),a.trackWidth=a.frameWidth-2*a.trackMargin,a.scrollWidth=a.$content[0].scrollWidth,a.ratio=a.trackWidth/a.scrollWidth,a.trackRatio=a.trackWidth/a.scrollWidth,a.handleWidth=a.handleSize>0?a.handleSize:a.trackWidth*a.trackRatio,a.scrollRatio=(a.scrollWidth-a.frameWidth)/(a.trackWidth-a.handleWidth),a.handleBounds={left:0,right:a.trackWidth-a.handleWidth},a.$content.css({paddingBottom:a.barHeight+a.paddingBottom}),l=a.$content.scrollLeft()*a.ratio,i=a.scrollWidth<=a.frameWidth,o={width:a.frameWidth},n={width:a.trackWidth,marginLeft:a.trackMargin},r={width:a.handleWidth}):(a.$scroller.css({padding:0}),a.$content.css({paddingTop:a.paddingTop,paddingRight:a.paddingRight,paddingBottom:a.paddingBottom,paddingLeft:a.paddingLeft}),a.barWidth=a.$content[0].offsetWidth-a.$content[0].clientWidth,a.frameHeight=a.$content.outerHeight(),a.trackHeight=a.frameHeight-2*a.trackMargin,a.scrollHeight=a.$content[0].scrollHeight,a.ratio=a.trackHeight/a.scrollHeight,a.trackRatio=a.trackHeight/a.scrollHeight,a.handleHeight=a.handleSize>0?a.handleSize:a.trackHeight*a.trackRatio,a.scrollRatio=(a.scrollHeight-a.frameHeight)/(a.trackHeight-a.handleHeight),a.handleBounds={top:0,bottom:a.frameHeight-a.handleHeight},l=a.$content.scrollTop()*a.ratio,i=a.scrollHeight<=a.frameHeight,o={height:a.frameHeight},n={height:a.trackHeight,marginBottom:a.trackMargin,marginTop:a.trackMargin},r={height:a.handleHeight}),i?a.$scroller.removeClass(f.isActive):a.$scroller.addClass(f.isActive),a.$bar.css(o),a.$track.css(n),a.$handle.css(r),d(a,l),a.$scroller.removeClass(f.isSetup)}})}};t.fn[p]=function(t){return m[t]?m[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?this:a.apply(this,arguments)},t[p]=function(t){"defaults"===t&&m.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery);